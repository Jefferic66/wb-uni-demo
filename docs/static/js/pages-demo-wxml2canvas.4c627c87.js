(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-demo-wxml2canvas"],{"1c02":function(t,e,n){"use strict";var r=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Draw",{enumerable:!0,get:function(){return l.Draw}}),Object.defineProperty(e,"Widget",{enumerable:!0,get:function(){return o.Widget}}),e.selectNodesRefInfo=e.renderToCanvas=e.canvasToTempFilePath=void 0,Object.defineProperty(e,"xmlParse",{enumerable:!0,get:function(){return a.default}}),n("96cf"),n("d3b7");var i=r(n("1da1")),a=r(n("e62c")),o=n("7c8b"),l=n("734b"),u=function(t,e){var n=document.querySelector("".concat(t," canvas")),r=n.getContext("2d");return{canvas:n,ctx:r,width:n.width,height:n.height}};e.selectNodesRefInfo=u;var c=function(){var t=(0,i.default)(regeneratorRuntime.mark((function t(e){var n,r,i,u,c,s,d,f,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.ctx,r=e.canvas,i=e.xWxml,u=e.xStyle,n&&r){t.next=3;break}return t.abrupt("return",Promise.reject(new Error("renderToCanvas: fail canvas has not been created")));case 3:return c=(0,a.default)(i),s=c.root,d=new o.Widget(s,u),f=d.init(),h=new l.Draw(r,n),t.next=9,h.drawNode(f);case 9:return t.abrupt("return",Promise.resolve(f));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();e.renderToCanvas=c;var s=function(t){var e=t.top,n=t.left,r=t.width,i=t.height,a=t.canvas,o=t.canvasId,l=t.quality,u=void 0===l?1:l,c=t.fileType,s=void 0===c?"png":c;return a?new Promise((function(t,l){var c=uni.getSystemInfoSync().pixelRatio;uni.canvasToTempFilePath({x:n,y:e,width:r,height:i,destWidth:r*c,destHeight:i*c,canvasId:o,canvas:a,fileType:s||"png",quality:u||1,success:function(e){t(e.tempFilePath)},fail:l})})):Promise.reject(new Error("canvasToTempFilePath: fail canvas has not been passed"))};e.canvasToTempFilePath=s},"2d0d":function(t,e,n){n("4ae1"),n("d3b7"),n("f8c9");var r=n("36c6"),i=n("6f8f"),a=n("6b58");function o(t){var e=i();return function(){var n,i=r(t);if(e){var o=r(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return a(this,n)}}t.exports=o},"2ff7":function(t,e,n){var r=n("656e");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var i=n("4f06").default;i("6aca427f",r,!0,{sourceMap:!1,shadowMode:!1})},"31d6":function(t,e,n){"use strict";n.r(e);var r=n("b2b0"),i=n("5775");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("7ed0");var o,l=n("f0c5"),u=Object(l["a"])(i["default"],r["b"],r["c"],!1,null,"4f3c5611",null,!1,r["a"],o);e["default"]=u.exports},"36c6":function(t,e,n){function r(e){return t.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},r(e)}n("131a"),n("3410"),t.exports=r},"3c96":function(t,e){function n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}t.exports=n},4616:function(t,e,n){"use strict";var r=n("2ff7"),i=n.n(r);i.a},"4a4b":function(t,e,n){function r(e,n){return t.exports=r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},r(e,n)}n("131a"),t.exports=r},"4dfe":function(t,e,n){n("ac1f"),n("00b4"),n("d81d"),n("1276"),n("498a"),n("acd8"),n("e25e"),n("d3b7"),n("25f0"),n("fb6a");var r=function(t){var e=null;return!/^#/.test(t)||7!==t.length&&9!==t.length?null!==(e=/^(rgb|rgba)\((.+)\)/.exec(t))?"#"+e[2].split(",").map((function(t,e){return t=t.trim(),t=3===e?Math.floor(255*parseFloat(t)):parseInt(t,10),t=t.toString(16),1===t.length&&(t="0"+t),t})).join(""):"#00000000":t},i=function(t){return t.split("-").map((function(t,e){return 0===e?t:t[0].toUpperCase()+t.slice(1)})).join("")};t.exports={hex:r,splitLineToCamelCase:i}},"4f2d":function(t,e,n){var r=n("abf4");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var i=n("4f06").default;i("29943ca0",r,!0,{sourceMap:!1,shadowMode:!1})},5578:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return r}));var r={wbPage:n("3d57").default,wbButton:n("13e6").default,wbWxmlToCanvas:n("31d6").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("wb-page",{attrs:{full:!0,"custom-style":t.customStyle}},[n("v-uni-view",{staticClass:"container"},[n("v-uni-view",[n("v-uni-image",{staticClass:"img",attrs:{src:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-xyzgy/7d75b690-6087-11eb-918d-3d24828c498c.jpeg",mode:"widthFix"}})],1),n("v-uni-view",{staticClass:"wrap"},[n("v-uni-view",[n("v-uni-text",{staticClass:"wraptext"},[t._v("窗前明月光，疑是地上霜。举头望明月，低头思故乡")])],1),n("v-uni-view",[n("v-uni-image",{staticClass:"wrapimg",attrs:{src:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-xyzgy/7d75b690-6087-11eb-918d-3d24828c498c.jpeg",mode:"widthFix"}})],1)],1)],1),n("v-uni-view",{staticClass:"u-flex"},[n("v-uni-view",{staticClass:"u-flex-1 u-p-30"},[n("wb-button",{attrs:{block:!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.renderToCanvas.apply(void 0,arguments)}}},[t._v("渲染到canvas")])],1),n("v-uni-view",{staticClass:"u-flex-1 u-p-30"},[n("wb-button",{attrs:{block:!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.canvasToTempFilePath.apply(void 0,arguments)}}},[t._v("导出图片")])],1)],1),n("wb-wxml-to-canvas",{ref:"xWxmlToCanvas",attrs:{width:350,height:500,xStyle:t.style,xWxml:t.wxml}})],1)},a=[]},5775:function(t,e,n){"use strict";n.r(e);var r=n("fd7c"),i=n.n(r);for(var a in r)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(a);e["default"]=i.a},"5a43":function(t,e){function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}t.exports=n},"5bc3":function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}t.exports=r},6374:function(t,e,n){n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0");var r=n("6613");function i(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=r(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return l=t.done,t},e:function(t){u=!0,o=t},f:function(){try{l||null==n["return"]||n["return"]()}finally{if(u)throw o}}}}t.exports=i},"656e":function(t,e,n){var r=n("4bad");e=r(!1),e.push([t.i,"uni-page-body[data-v-1935cf7b]{background:rgba(0,0,0,.3)}.container[data-v-1935cf7b]{width:350px;margin:0 auto;height:420px;background:#fff;border-radius:20px;padding:20px}.img[data-v-1935cf7b]{width:310px;height:60px}.wrap[data-v-1935cf7b]{display:flex;justify-content:space-between;margin-top:10px}.wraptext[data-v-1935cf7b]{display:inline-block;font-size:13px;padding-right:10px}.wrapimg[data-v-1935cf7b]{width:60px;height:60px}body.?%PAGE?%[data-v-1935cf7b]{background:rgba(0,0,0,.3)}",""]),t.exports=e},6613:function(t,e,n){n("fb6a"),n("d3b7"),n("a630"),n("3ca3"),n("ac1f"),n("00b4");var r=n("5a43");function i(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}t.exports=i},"6b58":function(t,e,n){var r=n("7037"),i=n("3c96");function a(t,e){return!e||"object"!==r(e)&&"function"!==typeof e?i(t):e}t.exports=a},"6f8f":function(t,e,n){function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}n("d3b7"),n("f8c9"),n("4ae1"),t.exports=r},"734b":function(t,e,n){var r=n("6374"),i=n("c973"),a=n("970b"),o=n("5bc3");n("96cf"),n("cb29"),n("d3b7"),n("acd8"),n("ac1f"),n("5319"),n("1276"),n("07ac");var l=function(){"use strict";function t(e,n){a(this,t),this.canvas=e,this.ctx=n}return o(t,[{key:"roundRect",value:function(t,e,n,r,i){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=arguments.length>6&&void 0!==arguments[6]&&arguments[6];if(!(i<0)){var l=this.ctx;l.beginPath(),l.arc(t+i,e+i,i,Math.PI,3*Math.PI/2),l.arc(t+n-i,e+i,i,3*Math.PI/2,0),l.arc(t+n-i,e+r-i,i,0,Math.PI/2),l.arc(t+i,e+r-i,i,Math.PI/2,Math.PI),l.lineTo(t,e+i),o&&l.stroke(),a&&l.fill()}}},{key:"drawView",value:function(t,e){var n=this.ctx,r=t.left,i=t.top,a=t.width,o=t.height,l=e.borderRadius,u=void 0===l?0:l,c=e.borderWidth,s=void 0===c?0:c,d=e.borderColor,f=e.color,h=void 0===f?"#000":f,y=e.backgroundColor,v=void 0===y?"transparent":y;n.save(),s>0&&(n.fillStyle=d||h,this.roundRect(r,i,a,o,u)),n.fillStyle=v;var p=a-2*s,g=o-2*s,b=u-s>=0?u-s:0;this.roundRect(r+s,i+s,p,g,b),n.restore()}},{key:"drawImage",value:function(){var t=i(regeneratorRuntime.mark((function t(e,n,r){var i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t,a){var o=i.ctx,l=(i.canvas,r.borderRadius),u=void 0===l?0:l,c=n.left,s=n.top,d=n.width,f=n.height,h=null;o.save(),i.roundRect(c,s,d,f,u,!1,!1),o.clip(),h=new Image,h.onload=function(e){o.drawImage(h,c,s,d,f),o.restore(),t()},h.onerror=function(t){a()},h.src=e}));case 2:case"end":return t.stop()}}),t)})));function e(e,n,r){return t.apply(this,arguments)}return e}()},{key:"drawText",value:function(t,e,n){var i=this.ctx,a=e.left,o=e.top,l=e.width,u=e.height,c=n.color,s=void 0===c?"#000":c,d=n.lineHeight,f=void 0===d?"1.4em":d,h=n.fontSize,y=void 0===h?14:h,v=n.textAlign,p=void 0===v?"left":v,g=n.verticalAlign,b=void 0===g?"top":g,m=n.backgroundColor,x=void 0===m?"transparent":m;if(t&&!(f>u)){switch(i.save(),f&&(f=Math.ceil(parseFloat(f.replace("em"))*y)),i.textBaseline="top",i.font="".concat(y,"px sans-serif"),i.textAlign=p,i.fillStyle=x,this.roundRect(a,o,l,u,0),i.fillStyle=s,p){case"left":break;case"center":a+=.5*l;break;case"right":a+=l;break;default:break}var w=i.measureText(t).width,S=Math.ceil(w/l)*f,k=Math.ceil((u-S)/2);switch(k<0&&(k=0),b){case"top":break;case"middle":o+=k;break;case"bottom":o+=2*k;break;default:break}var T=Math.ceil((f-y)/2);if(w<=l)i.fillText(t,a,o+T);else{var C,j=t.split(""),P=o,W="",O=r(j);try{for(O.s();!(C=O.n()).done;){var E=C.value,R=W+E,L=i.measureText(R).width;if(L>l){if(i.fillText(W,a,o+T),o+=f,W=E,o+f>P+u)break}else W=R}}catch(I){O.e(I)}finally{O.f()}o+f<=P+u&&i.fillText(W,a,o+T),i.restore()}}}},{key:"drawNode",value:function(){var t=i(regeneratorRuntime.mark((function t(e){var n,r,i,a,o,l,u,c,s,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.layoutBox,r=e.computedStyle,i=e.name,a=e.attributes,o=a.src,l=a.text,"view"!==i){t.next=6;break}this.drawView(n,r),t.next=12;break;case 6:if("image"!==i){t.next=11;break}return t.next=9,this.drawImage(o,n,r);case 9:t.next=12;break;case 11:"text"===i&&this.drawText(l,n,r);case 12:u=Object.values(e.children),c=0,s=u;case 14:if(!(c<s.length)){t.next=21;break}return d=s[c],t.next=18,this.drawNode(d);case 18:c++,t.next=14;break;case 21:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),t}();t.exports={Draw:l}},"7c8b":function(t,e,n){var r=n("5bc3"),i=n("970b"),a=n("ed6d"),o=n("2d0d");n("d3b7"),n("159b"),n("07ac"),n("ac1f"),n("1276"),n("d81d"),n("498a"),n("b64b");var l=n("e701"),u=n("4dfe"),c=u.splitLineToCamelCase,s=function(t){"use strict";a(n,t);var e=o(n);function n(t){var r;return i(this,n),r=e.call(this,t.style),r.name=t.name,r.attributes=t.attributes,r}return n}(l),d=function(){"use strict";function t(e,n){i(this,t),this.xom=e,this.style=n,this.inheritProps=["fontSize","lineHeight","textAlign","verticalAlign","color"]}return r(t,[{key:"init",value:function(){return this.container=this.create(this.xom),this.container.layout(),this.inheritStyle(this.container),this.container}},{key:"inheritStyle",value:function(t){var e=this,n=t.parent||null,r=t.children||{},i=t.computedStyle;n&&this.inheritProps.forEach((function(t){i[t]=i[t]||n.computedStyle[t]})),Object.values(r).forEach((function(t){e.inheritStyle(t)}))}},{key:"create",value:function(t){var e=this,n=(t.attributes.class||"").split(" ");n=n.map((function(t){return c(t.trim())}));var r={};n.forEach((function(t){Object.assign(r,e.style[t]||{})}));for(var i={name:t.name,style:r},a=Object.keys(t.attributes),o={},l=0,u=a;l<u.length;l++){var d=u[l],f=t.attributes[d],h=c(d);o[h]=""===f||"true"===f||"false"!==f&&f}o.text=t.content,i.attributes=o;var y=new s(i);return t.children.forEach((function(t){var n=e.create(t);y.add(n)})),y}}]),t}();t.exports={Widget:d}},"7ed0":function(t,e,n){"use strict";var r=n("4f2d"),i=n.n(r);i.a},8437:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r='\n\t\t<view class="container">\n\t\t\t<view><image class="img" src="https://vkceyugu.cdn.bspapp.com/VKCEYUGU-xyzgy/7d75b690-6087-11eb-918d-3d24828c498c.jpeg" mode="widthFix"></image></view>\n\t\t\t<view class="wrap">\n\t\t\t\t<view>\n\t\t\t\t\t<text class="wraptext">窗前明月光，疑是地上霜。举头望明月，低头思故乡</text>\n\t\t\t\t</view>\n\t\t\t<view><image class="wrapimg" src="https://vkceyugu.cdn.bspapp.com/VKCEYUGU-xyzgy/7d75b690-6087-11eb-918d-3d24828c498c.jpeg" mode="widthFix"></image></view>\n\t\t\t</view>\n\t\t</view>\n',i={container:{width:350,height:420,backgroundColor:"#fff",borderRadius:20,padding:20},img:{width:310,height:310},wrap:{flexDirection:"row",justifyContent:"space-between",marginTop:10},wraptext:{width:210,height:60,fontSize:13,paddingRight:10},wrapimg:{width:60,height:60}},a={name:"test",data:function(){return{wxml:r,style:i,customStyle:{padding:"20rpx 0"}}},methods:{renderToCanvas:function(){this.$refs.xWxmlToCanvas.renderToCanvas()},canvasToTempFilePath:function(){this.$refs.xWxmlToCanvas.canvasToTempFilePath().then((function(t){uni.previewImage({urls:[t]})}))}}};e.default=a},9376:function(t,e,n){"use strict";n.r(e);var r=n("5578"),i=n("bc31");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("4616");var o,l=n("f0c5"),u=Object(l["a"])(i["default"],r["b"],r["c"],!1,null,"1935cf7b",null,!1,r["a"],o);e["default"]=u.exports},"970b":function(t,e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t.exports=n},abf4:function(t,e,n){var r=n("4bad");e=r(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/* COOL-UNI 颜色变量 */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 默认主题色 */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.hide[data-v-4f3c5611]{position:fixed;left:%?-800?%}',""]),t.exports=e},b2b0:function(t,e,n){"use strict";var r;n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return r}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{class:{hide:t.hide}},[n("v-uni-canvas",{style:{width:t.width+"px",height:t.height+"px"},attrs:{id:"canvas","canvas-id":"canvas",type:"2d"},on:{error:function(e){arguments[0]=e=t.$handleEvent(e),t.canvasIdErrorCallback.apply(void 0,arguments)}}})],1)},a=[]},bc31:function(t,e,n){"use strict";n.r(e);var r=n("8437"),i=n.n(r);for(var a in r)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(a);e["default"]=i.a},c973:function(t,e,n){function r(t,e,n,r,i,a,o){try{var l=t[a](o),u=l.value}catch(c){return void n(c)}l.done?e(u):Promise.resolve(u).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var o=t.apply(e,n);function l(t){r(o,i,a,l,u,"next",t)}function u(t){r(o,i,a,l,u,"throw",t)}l(void 0)}))}}n("d3b7"),t.exports=i},e62c:function(t,e,n){function r(t){return t=t.trim(),t=t.replace(/<!--[\s\S]*?-->/g,""),e();function e(){return{declaration:n(),root:r()}}function n(){var t=l(/^<\?xml\s*/);if(t){var e={attributes:{}};while(!u()&&!c("?>")){var n=a();if(!n)return e;e.attributes[n.name]=n.value}return l(/\?>\s*/),e}}function r(){var t=l(/^<([\w-:.]+)\s*/);if(t){var e,n={name:t[1],attributes:{},children:[]};while(!(u()||c(">")||c("?>")||c("/>"))){var o=a();if(!o)return n;n.attributes[o.name]=o.value}if(l(/^\s*\/>\s*/))return n;l(/\??>\s*/),n.content=i();while(e=r())n.children.push(e);return l(/^<\/[\w-:.]+>\s*/),n}}function i(){var t=l(/^([^<]*)/);return t?t[1]:""}function a(){var t=l(/([\w:-]+)\s*=\s*("[^"]*"|'[^']*'|\w+)\s*/);if(t)return{name:t[1],value:o(t[2])}}function o(t){return t.replace(/^['"]|['"]$/g,"")}function l(e){var n=t.match(e);if(n)return t=t.slice(n[0].length),n}function u(){return 0==t.length}function c(e){return 0==t.indexOf(e)}}n("498a"),n("ac1f"),n("5319"),n("466d"),n("fb6a"),n("c975"),t.exports=r},e701:function(t,e,n){(function(t){var r,i,a,o=n("7037");n("a4d3"),n("e01a"),n("d3b7"),n("944a"),n("0c47"),n("23dc"),n("159b"),n("b64b"),n("caad"),n("2532"),n("d81d"),function(n,l){"object"==o(e)&&"object"==o(t)?t.exports=l():(i=[],r=l,a="function"===typeof r?r.apply(e,i):r,void 0===a||(t.exports=a))}(0,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==o(t)&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(1)),a=n(2),o=0,l=function(){function t(e){var n=this;void 0===e&&(e={}),this.parent=null,this.id=t.uuid(),this.style={},this.computedStyle={},this.lastComputedStyle={},this.children={},this.layoutBox={left:0,top:0,width:0,height:0},e=Object.assign(a.getDefaultStyle(),e),this.computedStyle=Object.assign(a.getDefaultStyle(),e),this.lastComputedStyle=Object.assign(a.getDefaultStyle(),e),Object.keys(e).forEach((function(t){Object.defineProperty(n.style,t,{configurable:!0,enumerable:!0,get:function(){return e[t]},set:function(r){r!==e[t]&&void 0!==r&&(n.lastComputedStyle=n.computedStyle[t],e[t]=r,n.computedStyle[t]=r,a.scalableStyles.includes(t)&&n.style.scale&&(n.computedStyle[t]=r*n.style.scale),"scale"===t&&a.scalableStyles.forEach((function(t){e[t]&&(n.computedStyle[t]=e[t]*r)})),"hidden"===t&&(r?a.layoutAffectedStyles.forEach((function(t){n.computedStyle[t]=0})):a.layoutAffectedStyles.forEach((function(t){n.computedStyle[t]=n.lastComputedStyle[t]}))))}})})),this.style.scale&&a.scalableStyles.forEach((function(t){if(n.style[t]){var e=n.style[t]*n.style.scale;n.computedStyle[t]=e}})),e.hidden&&a.layoutAffectedStyles.forEach((function(t){n.computedStyle[t]=0}))}return t.uuid=function(){return o++},t.prototype.getAbsolutePosition=function(t){if(!t)return this.getAbsolutePosition(this);if(!t.parent)return{left:0,top:0};var e=this.getAbsolutePosition(t.parent),n=e.left,r=e.top;return{left:n+t.layoutBox.left,top:r+t.layoutBox.top}},t.prototype.add=function(t){t.parent=this,this.children[t.id]=t},t.prototype.remove=function(t){var e=this;t?this.children[t.id]&&(t.remove(),delete this.children[t.id]):Object.keys(this.children).forEach((function(t){e.children[t].remove(),delete e.children[t]}))},t.prototype.getNodeTree=function(){var t=this;return{id:this.id,style:this.computedStyle,children:Object.keys(this.children).map((function(e){return t.children[e].getNodeTree()}))}},t.prototype.applyLayout=function(t){var e=this;["left","top","width","height"].forEach((function(n){t.layout&&"number"==typeof t.layout[n]&&(e.layoutBox[n]=t.layout[n],!e.parent||"left"!==n&&"top"!==n||(e.layoutBox[n]+=e.parent.layoutBox[n]))})),t.children.forEach((function(t){e.children[t.id].applyLayout(t)}))},t.prototype.layout=function(){var t=this.getNodeTree();i.default(t),this.applyLayout(t)},t}();e.default=l},function(t,e,n){"use strict";n.r(e);var r=function(){var t,e="inherit",n="ltr",r="rtl",i="row",a="row-reverse",o="column",l="column-reverse",u="flex-start",c="center",s="flex-end",d="space-between",f="space-around",h="flex-start",y="center",v="flex-end",p="stretch",g="relative",b="absolute",m={row:"left","row-reverse":"right",column:"top","column-reverse":"bottom"},x={row:"right","row-reverse":"left",column:"bottom","column-reverse":"top"},w={row:"left","row-reverse":"right",column:"top","column-reverse":"bottom"},S={row:"width","row-reverse":"width",column:"height","column-reverse":"height"};function k(t){return void 0===t}function T(t){return t===i||t===a}function C(t,e){if(void 0!==t.style.marginStart&&T(e))return t.style.marginStart;var n=null;switch(e){case"row":n=t.style.marginLeft;break;case"row-reverse":n=t.style.marginRight;break;case"column":n=t.style.marginTop;break;case"column-reverse":n=t.style.marginBottom}return void 0!==n?n:void 0!==t.style.margin?t.style.margin:0}function j(t,e){if(void 0!==t.style.marginEnd&&T(e))return t.style.marginEnd;var n=null;switch(e){case"row":n=t.style.marginRight;break;case"row-reverse":n=t.style.marginLeft;break;case"column":n=t.style.marginBottom;break;case"column-reverse":n=t.style.marginTop}return null!=n?n:void 0!==t.style.margin?t.style.margin:0}function P(t,e){if(void 0!==t.style.borderStartWidth&&t.style.borderStartWidth>=0&&T(e))return t.style.borderStartWidth;var n=null;switch(e){case"row":n=t.style.borderLeftWidth;break;case"row-reverse":n=t.style.borderRightWidth;break;case"column":n=t.style.borderTopWidth;break;case"column-reverse":n=t.style.borderBottomWidth}return null!=n&&n>=0?n:void 0!==t.style.borderWidth&&t.style.borderWidth>=0?t.style.borderWidth:0}function W(t,e){if(void 0!==t.style.borderEndWidth&&t.style.borderEndWidth>=0&&T(e))return t.style.borderEndWidth;var n=null;switch(e){case"row":n=t.style.borderRightWidth;break;case"row-reverse":n=t.style.borderLeftWidth;break;case"column":n=t.style.borderBottomWidth;break;case"column-reverse":n=t.style.borderTopWidth}return null!=n&&n>=0?n:void 0!==t.style.borderWidth&&t.style.borderWidth>=0?t.style.borderWidth:0}function O(t,e){return function(t,e){if(void 0!==t.style.paddingStart&&t.style.paddingStart>=0&&T(e))return t.style.paddingStart;var n=null;switch(e){case"row":n=t.style.paddingLeft;break;case"row-reverse":n=t.style.paddingRight;break;case"column":n=t.style.paddingTop;break;case"column-reverse":n=t.style.paddingBottom}return null!=n&&n>=0?n:void 0!==t.style.padding&&t.style.padding>=0?t.style.padding:0}(t,e)+P(t,e)}function E(t,e){return function(t,e){if(void 0!==t.style.paddingEnd&&t.style.paddingEnd>=0&&T(e))return t.style.paddingEnd;var n=null;switch(e){case"row":n=t.style.paddingRight;break;case"row-reverse":n=t.style.paddingLeft;break;case"column":n=t.style.paddingBottom;break;case"column-reverse":n=t.style.paddingTop}return null!=n&&n>=0?n:void 0!==t.style.padding&&t.style.padding>=0?t.style.padding:0}(t,e)+W(t,e)}function R(t,e){return P(t,e)+W(t,e)}function L(t,e){return C(t,e)+j(t,e)}function I(t,e){return O(t,e)+E(t,e)}function _(t,e){return e.style.alignSelf?e.style.alignSelf:t.style.alignItems?t.style.alignItems:"stretch"}function M(t,e){if(e===r){if(t===i)return a;if(t===a)return i}return t}function B(t,e){return function(t){return t===o||t===l}(t)?M(i,e):o}function A(t){return t.style.position?t.style.position:"relative"}function F(t){return A(t)===g&&t.style.flex>0}function D(t,e){return t.layout[S[e]]+L(t,e)}function N(t,e){return void 0!==t.style[S[e]]&&t.style[S[e]]>=0}function U(t,e){return void 0!==t.style[e]}function H(t,e){return void 0!==t.style[e]?t.style[e]:0}function $(t,e,n){var r={row:t.style.minWidth,"row-reverse":t.style.minWidth,column:t.style.minHeight,"column-reverse":t.style.minHeight}[e],i={row:t.style.maxWidth,"row-reverse":t.style.maxWidth,column:t.style.maxHeight,"column-reverse":t.style.maxHeight}[e],a=n;return void 0!==i&&i>=0&&a>i&&(a=i),void 0!==r&&r>=0&&a<r&&(a=r),a}function z(t,e){return t>e?t:e}function q(t,e){void 0===t.layout[S[e]]&&N(t,e)&&(t.layout[S[e]]=z($(t,e,t.style[S[e]]),I(t,e)))}function V(t,e,n){e.layout[x[n]]=t.layout[S[n]]-e.layout[S[n]]-e.layout[w[n]]}function G(t,e){return void 0!==t.style[m[e]]?H(t,m[e]):-H(t,x[e])}function K(r,W,K){var J=function(t,r){var i;return(i=t.style.direction?t.style.direction:e)===e&&(i=void 0===r?n:r),i}(r,K),Q=M(function(t){return t.style.flexDirection?t.style.flexDirection:o}(r),J),X=B(Q,J),Z=M(i,J);q(r,Q),q(r,X),r.layout.direction=J,r.layout[m[Q]]+=C(r,Q)+G(r,Q),r.layout[x[Q]]+=j(r,Q)+G(r,Q),r.layout[m[X]]+=C(r,X)+G(r,X),r.layout[x[X]]+=j(r,X)+G(r,X);var tt=r.children.length,et=I(r,Z);if(function(t){return void 0!==t.style.measure}(r)){var nt=!k(r.layout[S[Z]]),rt=t;rt=N(r,Z)?r.style.width:nt?r.layout[S[Z]]:W-L(r,Z),rt-=et;var it=!N(r,Z)&&!nt,at=!N(r,o)&&k(r.layout[S[o]]);if(it||at){var ot=r.style.measure(rt);it&&(r.layout.width=ot.width+et),at&&(r.layout.height=ot.height+I(r,o))}if(0===tt)return}var lt,ut,ct,st,dt=function(t){return"wrap"===t.style.flexWrap}(r),ft=function(t){return t.style.justifyContent?t.style.justifyContent:"flex-start"}(r),ht=O(r,Q),yt=O(r,X),vt=I(r,Q),pt=I(r,X),gt=!k(r.layout[S[Q]]),bt=!k(r.layout[S[X]]),mt=T(Q),xt=null,wt=null,St=t;gt&&(St=r.layout[S[Q]]-vt);for(var kt=0,Tt=0,Ct=0,jt=0,Pt=0,Wt=0;Tt<tt;){var Ot,Et=0,Rt=0,Lt=0,It=0,_t=gt&&ft===u||!gt&&ft!==c,Mt=_t?tt:kt,Bt=!0,At=tt,Ft=null,Dt=null,Nt=ht,Ut=0;for(lt=kt;lt<tt;++lt){if((ct=r.children[lt]).lineIndex=Wt,ct.nextAbsoluteChild=null,ct.nextFlexChild=null,(Jt=_(r,ct))===p&&A(ct)===g&&bt&&!N(ct,X))ct.layout[S[X]]=z($(ct,X,r.layout[S[X]]-pt-L(ct,X)),I(ct,X));else if(A(ct)===b)for(null===xt&&(xt=ct),null!==wt&&(wt.nextAbsoluteChild=ct),wt=ct,ut=0;ut<2;ut++)st=0!==ut?i:o,!k(r.layout[S[st]])&&!N(ct,st)&&U(ct,m[st])&&U(ct,x[st])&&(ct.layout[S[st]]=z($(ct,st,r.layout[S[st]]-I(r,st)-L(ct,st)-H(ct,m[st])-H(ct,x[st])),I(ct,st)));var Ht=0;if(gt&&F(ct)?(Rt++,Lt+=ct.style.flex,null===Ft&&(Ft=ct),null!==Dt&&(Dt.nextFlexChild=ct),Dt=ct,Ht=I(ct,Q)+L(ct,Q)):(Ot=t,mt||(Ot=N(r,Z)?r.layout[S[Z]]-et:W-L(r,Z)-et),0===Ct&&Y(ct,Ot,J),A(ct)===g&&(It++,Ht=D(ct,Q))),dt&&gt&&Et+Ht>St&&lt!==kt){It--,Ct=1;break}_t&&(A(ct)!==g||F(ct))&&(_t=!1,Mt=lt),Bt&&(A(ct)!==g||Jt!==p&&Jt!==h||k(ct.layout[S[X]]))&&(Bt=!1,At=lt),_t&&(ct.layout[w[Q]]+=Nt,gt&&V(r,ct,Q),Nt+=D(ct,Q),Ut=z(Ut,$(ct,X,D(ct,X)))),Bt&&(ct.layout[w[X]]+=jt+yt,bt&&V(r,ct,X)),Ct=0,Et+=Ht,Tt=lt+1}var $t=0,zt=0,qt=0;if(qt=gt?St-Et:z(Et,0)-Et,0!==Rt){var Vt,Gt,Kt=qt/Lt;for(Dt=Ft;null!==Dt;)(Vt=Kt*Dt.style.flex+I(Dt,Q))!==(Gt=$(Dt,Q,Vt))&&(qt-=Gt,Lt-=Dt.style.flex),Dt=Dt.nextFlexChild;for((Kt=qt/Lt)<0&&(Kt=0),Dt=Ft;null!==Dt;)Dt.layout[S[Q]]=$(Dt,Q,Kt*Dt.style.flex+I(Dt,Q)),Ot=t,N(r,Z)?Ot=r.layout[S[Z]]-et:mt||(Ot=W-L(r,Z)-et),Y(Dt,Ot,J),ct=Dt,Dt=Dt.nextFlexChild,ct.nextFlexChild=null}else ft!==u&&(ft===c?$t=qt/2:ft===s?$t=qt:ft===d?(qt=z(qt,0),zt=Rt+It-1!=0?qt/(Rt+It-1):0):ft===f&&($t=(zt=qt/(Rt+It))/2));for(Nt+=$t,lt=Mt;lt<Tt;++lt)A(ct=r.children[lt])===b&&U(ct,m[Q])?ct.layout[w[Q]]=H(ct,m[Q])+P(r,Q)+C(ct,Q):(ct.layout[w[Q]]+=Nt,gt&&V(r,ct,Q),A(ct)===g&&(Nt+=zt+D(ct,Q),Ut=z(Ut,$(ct,X,D(ct,X)))));var Yt=r.layout[S[X]];for(bt||(Yt=z($(r,X,Ut+pt),pt)),lt=At;lt<Tt;++lt)if(A(ct=r.children[lt])===b&&U(ct,m[X]))ct.layout[w[X]]=H(ct,m[X])+P(r,X)+C(ct,X);else{var Jt,Qt=yt;if(A(ct)===g)if((Jt=_(r,ct))===p)k(ct.layout[S[X]])&&(ct.layout[S[X]]=z($(ct,X,Yt-pt-L(ct,X)),I(ct,X)));else if(Jt!==h){var Xt=Yt-pt-D(ct,X);Qt+=Jt===y?Xt/2:Xt}ct.layout[w[X]]+=jt+Qt,bt&&V(r,ct,X)}jt+=Ut,Pt=z(Pt,Nt),Wt+=1,kt=Tt}if(Wt>1&&bt){var Zt=r.layout[S[X]]-pt,te=Zt-jt,ee=0,ne=yt,re=function(t){return t.style.alignContent?t.style.alignContent:"flex-start"}(r);re===v?ne+=te:re===y?ne+=te/2:re===p&&Zt>jt&&(ee=te/Wt);var ie=0;for(lt=0;lt<Wt;++lt){var ae=ie,oe=0;for(ut=ae;ut<tt;++ut)if(A(ct=r.children[ut])===g){if(ct.lineIndex!==lt)break;k(ct.layout[S[X]])||(oe=z(oe,ct.layout[S[X]]+L(ct,X)))}for(ie=ut,oe+=ee,ut=ae;ut<ie;++ut)if(A(ct=r.children[ut])===g){var le=_(r,ct);if(le===h)ct.layout[w[X]]=ne+C(ct,X);else if(le===v)ct.layout[w[X]]=ne+oe-j(ct,X)-ct.layout[S[X]];else if(le===y){var ue=ct.layout[S[X]];ct.layout[w[X]]=ne+(oe-ue)/2}else le===p&&(ct.layout[w[X]]=ne+C(ct,X))}ne+=oe}}var ce=!1,se=!1;if(gt||(r.layout[S[Q]]=z($(r,Q,Pt+E(r,Q)),vt),Q!==a&&Q!==l||(ce=!0)),bt||(r.layout[S[X]]=z($(r,X,jt+pt),pt),X!==a&&X!==l||(se=!0)),ce||se)for(lt=0;lt<tt;++lt)ct=r.children[lt],ce&&V(r,ct,Q),se&&V(r,ct,X);for(wt=xt;null!==wt;){for(ut=0;ut<2;ut++)st=0!==ut?i:o,!k(r.layout[S[st]])&&!N(wt,st)&&U(wt,m[st])&&U(wt,x[st])&&(wt.layout[S[st]]=z($(wt,st,r.layout[S[st]]-R(r,st)-L(wt,st)-H(wt,m[st])-H(wt,x[st])),I(wt,st))),U(wt,x[st])&&!U(wt,m[st])&&(wt.layout[m[st]]=r.layout[S[st]]-wt.layout[S[st]]-H(wt,x[st]));ct=wt,wt=wt.nextAbsoluteChild,ct.nextAbsoluteChild=null}}function Y(t,e,r){t.shouldUpdate=!0;var i=t.style.direction||n;!t.isDirty&&t.lastLayout&&t.lastLayout.requestedHeight===t.layout.height&&t.lastLayout.requestedWidth===t.layout.width&&t.lastLayout.parentMaxWidth===e&&t.lastLayout.direction===i?(t.layout.width=t.lastLayout.width,t.layout.height=t.lastLayout.height,t.layout.top=t.lastLayout.top,t.layout.left=t.lastLayout.left):(t.lastLayout||(t.lastLayout={}),t.lastLayout.requestedWidth=t.layout.width,t.lastLayout.requestedHeight=t.layout.height,t.lastLayout.parentMaxWidth=e,t.lastLayout.direction=i,t.children.forEach((function(t){t.layout.width=void 0,t.layout.height=void 0,t.layout.top=0,t.layout.left=0})),K(t,e,r),t.lastLayout.width=t.layout.width,t.lastLayout.height=t.layout.height,t.lastLayout.top=t.layout.top,t.lastLayout.left=t.layout.left)}return{layoutNodeImpl:K,computeLayout:Y,fillNodes:function t(e){return e.layout&&!e.isDirty||(e.layout={width:void 0,height:void 0,top:0,left:0,right:0,bottom:0}),e.style||(e.style={}),e.children||(e.children=[]),e.children.forEach(t),e}}}();e.default=function(t){r.fillNodes(t),r.computeLayout(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.textStyles=["color","fontSize","textAlign","fontWeight","lineHeight","lineBreak"],e.scalableStyles=["left","top","right","bottom","width","height","margin","marginLeft","marginRight","marginTop","marginBottom","padding","paddingLeft","paddingRight","paddingTop","paddingBottom","borderWidth","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],e.layoutAffectedStyles=["margin","marginTop","marginBottom","marginLeft","marginRight","padding","paddingTop","paddingBottom","paddingLeft","paddingRight","width","height"],e.getDefaultStyle=function(){return{left:void 0,top:void 0,right:void 0,bottom:void 0,width:void 0,height:void 0,maxWidth:void 0,maxHeight:void 0,minWidth:void 0,minHeight:void 0,margin:void 0,marginLeft:void 0,marginRight:void 0,marginTop:void 0,marginBottom:void 0,padding:void 0,paddingLeft:void 0,paddingRight:void 0,paddingTop:void 0,paddingBottom:void 0,borderWidth:void 0,flexDirection:void 0,justifyContent:void 0,alignItems:void 0,alignSelf:void 0,flex:void 0,flexWrap:void 0,position:void 0,hidden:!1,scale:1}}}]).default}))}).call(this,n("62e4")(t))},ed6d:function(t,e,n){var r=n("4a4b");function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}t.exports=i},fd7c:function(t,e,n){"use strict";var r=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var i=r(n("1da1"));n("a9e3"),n("d3b7");var a=n("1c02"),o={props:{hide:{type:Boolean,default:!0},width:{type:Number,default:300},height:{type:Number,default:300},xWxml:{type:String,default:""},xStyle:{type:Object,default:function(){return{}}}},data:function(){return{canvasId:"canvas"}},methods:{canvasIdErrorCallback:function(t){console.log("canvasIdErrorCallback",t)},renderToCanvas:function(){var t=this,e=this.ctx,n=this.canvas,r=this.xWxml,i=this.xStyle;(0,a.renderToCanvas)({ctx:e,canvas:n,xWxml:r,xStyle:i}).then((function(e){t.boundary={top:e.layoutBox.top,left:e.layoutBox.left,width:e.computedStyle.width,height:e.computedStyle.height}}))},canvasToTempFilePath:function(){var t=this.canvas,e=this.canvasId,n=this.boundary;if(!n)return Promise.reject(new Error("canvasToTempFilePath: renderToCanvas 函数未执行"));var r=n.top,i=n.left,o=n.width,l=n.height;return new Promise((function(n,u){(0,a.canvasToTempFilePath)({top:r,left:i,width:o,height:l,canvasId:e,canvas:t}).then((function(t){n(t)}))}))}},mounted:function(){var t=this;this.$nextTick((0,i.default)(regeneratorRuntime.mark((function e(){var n,r,i,o,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,a.selectNodesRefInfo)("#".concat(t.canvasId),t);case 2:n=e.sent,r=n.canvas,i=n.ctx,o=n.width,l=n.height,u=uni.getSystemInfoSync().pixelRatio,r.width=o*u,r.height=l*u,i.scale(u,u),t.canvas=r,t.ctx=i;case 13:case"end":return e.stop()}}),e)}))))}};e.default=o}}]);
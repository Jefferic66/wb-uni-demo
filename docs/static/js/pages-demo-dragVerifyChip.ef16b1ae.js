(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-demo-dragVerifyChip"],{"172d":function(t,i,e){"use strict";var a=e("36c6"),s=e.n(a);s.a},2618:function(t,i,e){"use strict";e.r(i);var a=e("4410"),s=e.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){e.d(i,t,(function(){return a[t]}))}(n);i["default"]=s.a},"36c6":function(t,i,e){var a=e("fab5");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=e("4f06").default;s("95d14692",a,!0,{sourceMap:!1,shadowMode:!1})},4410:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("a9e3"),e("99af"),e("cb29"),e("ac1f"),e("e25e");var a={props:{isPassing:{type:Boolean,default:!1},width:{type:[Number,String],default:650},height:{type:[Number,String],default:80},text:{type:String,default:""},successText:{type:String,default:""},background:{type:String,default:"#eee"},progressBarBg:{type:String,default:"#76c61d"},completedBg:{type:String,default:"#76c61d"},circle:{type:Boolean,default:!1},radius:{type:[Number,String],default:8},handlerIcon:{type:String,default:"arrow-right-double"},successIcon:{type:String,default:"checkmark-circle"},handlerBg:{type:String,default:"#fff"},textSize:{type:[Number,String],default:28},textColor:{type:String,default:"#000"},imgSrc:{type:String},barWidth:{type:[Number,String],default:72},barRadius:{type:[Number,String],default:12},showRefresh:{type:Boolean,default:!1},refreshIcon:{type:String,default:"reload"},showTips:{type:Boolean,default:!0},successTip:{type:String,default:""},failTip:{type:String,default:""},diffWidth:{type:Number,default:16}},computed:{Text:function(){return this.text||this.$t?this.$t("wb.dragVerify.text"):"请按住滑块拖动"},SuccessText:function(){return this.successText||this.$t?this.$t("wb.dragVerify.success"):"验证通过"},FailTip:function(){return this.failTip||this.$t?this.$t("wb.dragVerify.failTip"):"验证未通过，拖动滑块将悬浮图像正确合并"},SuccessTip:function(){return this.successTip||this.$t?this.$t("wb.dragVerify.successTip",{ratio:this.ratio}):"验证通过，超过"+this.ratio+"%用户"},handlerStyle:function(){return{left:this.handlerLeft+"px",width:this.height+"rpx",height:this.height+"rpx",background:this.handlerBg}},message:function(){return this.isPassing?"":this.Text},successMessage:function(){return this.isPassing?this.SuccessText:""},dragVerifyStyle:function(){return{width:this.width+"rpx",height:this.height+"rpx",lineHeight:this.height+"rpx",background:this.background,borderRadius:"0 0 "+this.radius+"rpx "+this.radius+"rpx"}},dragVerifyImgStyle:function(){return{width:this.width+"rpx",position:"relative",overflow:"hidden"}},progressBarStyle:function(){return{background:this.isPassing?this.completedBg:this.progressBarBg,height:this.height+"rpx",width:this.progressBarWidth+"px",borderRadius:"0 0 "+this.radius+"rpx "+this.radius+"rpx",color:this.isPassing?"#fff":this.textColor}},textStyle:function(){return{height:this.height+"rpx",width:this.width+"rpx",fontSize:this.textSize+"rpx",background:"linear-gradient(95deg, ".concat(this.textColor,", ").concat(this.textColor,",").concat(this.textColor,",").concat(this.textColor,",").concat(this.textColor,",  #fff, ").concat(this.textColor,", ").concat(this.textColor,", ").concat(this.textColor,",").concat(this.textColor,",").concat(this.textColor,")"),color:this.isPassing?"#fff":this.textColor,fontWeight:this.isPassing?"bold":"normal","-webkit-text-fill-color":this.isPassing?"unset":"transparent","-webkit-background-clip":"text"}}},data:function(){var t=(Math.round(120*Math.random()+870)/10).toFixed(1);return{needR:"",isMoving:!1,x:0,isOk:!1,handlerLeft:0,progressBarWidth:0,isKeep:!1,clipBarx:0,showErrorTip:!1,imgWidth:0,imgHeight:0,moveCanvasWidth:0,maincanvasDisplay:!0,movecanvasDisplay:!0,movecanvasLeft:0,ratio:t}},methods:{getPoint:function(t){return t?t.touches&&t.touches[0]?{x:t.touches[0].pageX,y:t.touches[0].pageY}:t.changedTouches&&t.changedTouches[0]?{x:t.changedTouches[0].pageX,y:t.changedTouches[0].pageY}:{x:t.clientX,y:t.clientY}:{x:0,y:0}},draw:function(t,i,e,a){var s=uni.upx2px(this.barWidth),n=uni.upx2px(this.barRadius),r=Math.PI;t.beginPath(),t.moveTo(i,e),t.arc(i+s/2,e-n+2,n,.72*r,2.26*r),t.lineTo(i+s,e),t.arc(i+s+n-2,e+s/2,n,1.21*r,2.78*r),t.lineTo(i+s,e+s),t.lineTo(i,e+s),t.arc(i+n-2,e+s/2,n+.4,2.76*r,1.24*r,!0),t.lineTo(i,e),t.setGlobalAlpha(.85),"fill"==a?t.lineWidth=2:"clip"==a&&(t.lineWidth=3),t.strokeStyle="#fff",t.fillStyle="#fff",t.stroke(),t.setGlobalAlpha(.6),"fill"==a?t.fill():"clip"==a&&t.clip(),t.globalCompositeOperation="destination-over",t.globalAlpha=.8,t.draw()},checkimgLoaded:function(){var t=this;uni.createSelectorQuery().in(this).select("#checkImg").boundingClientRect((function(i){var e=uni.upx2px(t.barWidth);t.imgHeight=i.height,t.imgWidth=i.width;var a=Math.floor(uni.upx2px(t.width)/2.5),s=25,n=20,r=a+Math.ceil(Math.random()*(a-e-uni.upx2px(t.barRadius)-5)),o=s+Math.floor(Math.random()*(t.imgHeight-e-s-n));t.maincanvasDisplay=!0;var c=uni.createCanvasContext("maincanvas",t);t.draw(c,r,o,"fill"),t.clipBarx=r-2,t.movecanvasDisplay=!0,uni.getImageInfo({src:t.imgSrc,success:function(i){t.$wb.pathToBase64(i.path).then((function(i){var a=uni.createCanvasContext("movecanvas");a.save(),t.draw(a,r,o,"clip"),a.drawImage(i,0,0,t.imgWidth,t.imgHeight),a.restore(),a.draw(),r-=2,o=o-2*uni.upx2px(t.barRadius)-1;var s=e+2*uni.upx2px(t.barRadius)+3;t.moveCanvasWidth=s,setTimeout((function(){t.needR=[r,t.imgHeight,s,t.$sys.pixelRatio].join()}),17)}))}})})).exec()},dragStart:function(t){var i=this;if(!this.isPassing){this.isMoving=!0;var e=this.getPoint(t);uni.createSelectorQuery().in(this).select("#handler").boundingClientRect((function(t){i.x=e.x-parseInt(t.left,10)})).exec()}this.showBar=!0,this.showErrorTip=!1},dragMoving:function(t){if(this.isMoving&&!this.isPassing){var i=this.getPoint(t),e=i.x-this.x;this.handlerLeft=e,this.progressBarWidth=e+uni.upx2px(this.height/2),this.movecanvasLeft=e}},dragFinish:function(t){var i=this;if(this.isMoving&&!this.isPassing){var e=this.getPoint(t),a=e.x-this.x;Math.abs(a-this.clipBarx)>this.diffWidth?(this.isOk=!0,setTimeout((function(){i.handlerLeft=0,i.progressBarWidth=0,i.movecanvasLeft=0,i.isOk=!1}),500),this.$emit("verify",!1),this.showErrorTip=!0):this.passVerify(),this.isMoving=!1}},passVerify:function(){var t=this;this.$emit("update:isPassing",!0),this.isMoving=!1,this.isKeep=!0,setTimeout((function(){t.movecanvasLeft=t.clipBarx,setTimeout((function(){t.isKeep=!1,t.maincanvasDisplay=!1,t.movecanvasDisplay=!1}),200)}),100),this.$emit("verify",!0)},reset:function(){this.reImg(),this.checkimgLoaded()},reImg:function(){this.$emit("update:isPassing",!1),this.isMoving=!1,this.x=0,this.isOk=!1,this.isKeep=!1,this.clipBarx=0,this.showErrorTip=!1,this.handlerLeft=0,this.progressBarWidth=0,this.movecanvasLeft=0,this.ratio=(Math.round(120*Math.random()+870)/10).toFixed(1)},refreshimg:function(){this.$emit("refresh")}},watch:{imgSrc:{immediate:!1,handler:function(){this.reImg()}}}};i.default=a},5567:function(t,i,e){"use strict";e.r(i);var a=e("e7a8"),s=e.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){e.d(i,t,(function(){return a[t]}))}(n);i["default"]=s.a},8122:function(t,i,e){"use strict";e.d(i,"b",(function(){return s})),e.d(i,"c",(function(){return n})),e.d(i,"a",(function(){return a}));var a={uIcon:e("2925").default},s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{wxsProps:{"change:prop":"needR"},staticClass:"wb-drag-verify-container",attrs:{prop:t.needR,"change:prop":t.dragverifychip.create}},[e("v-uni-view",{style:t.dragVerifyImgStyle},[e("v-uni-image",{staticStyle:{width:"100%"},style:{borderRadius:t.radius+"rpx "+t.radius+"rpx 0 0"},attrs:{id:"checkImg",src:t.imgSrc,mode:"widthFix","lazy-load":!0},on:{load:function(i){arguments[0]=i=t.$handleEvent(i),t.checkimgLoaded.apply(void 0,arguments)}}}),e("v-uni-canvas",{directives:[{name:"show",rawName:"v-show",value:t.maincanvasDisplay,expression:"maincanvasDisplay"}],staticClass:"main-canvas",style:{width:t.imgWidth>0?t.imgWidth+"px":"100%",height:t.imgHeight>0?t.imgHeight+"px":"500px"},attrs:{"canvas-id":"maincanvas",id:"maincanvas"}}),e("v-uni-canvas",{directives:[{name:"show",rawName:"v-show",value:t.movecanvasDisplay,expression:"movecanvasDisplay"}],staticClass:"move-canvas",class:{goFirst:t.isOk,goKeep:t.isKeep},style:{width:t.moveCanvasWidth>0?t.moveCanvasWidth+"px":"118rpx",height:t.imgHeight>0?t.imgHeight+"px":"600rpx",left:t.movecanvasLeft+"px"},attrs:{"canvas-id":"movecanvas2",id:"movecanvas2"}}),t.showRefresh&&!t.isPassing?e("v-uni-view",{staticClass:"refresh"},[e("u-icon",{attrs:{name:t.refreshIcon,color:"#999"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.refreshimg.apply(void 0,arguments)}}})],1):t._e(),t.showTips&&t.isPassing?e("v-uni-view",{staticClass:"tips success"},[t._v(t._s(t.SuccessTip))]):t._e(),t.showTips&&!t.isPassing&&t.showErrorTip?e("v-uni-view",{staticClass:"tips danger"},[t._v(t._s(t.FailTip))]):t._e()],1),e("v-uni-canvas",{staticStyle:{left:"-9999px",top:"-9999px",position:"absolute",width:"750rpx",height:"500px"},attrs:{"canvas-id":"movecanvas",id:"movecanvas"}}),e("v-uni-view",{staticClass:"wb-drag_verify",style:[t.dragVerifyStyle],on:{mousemove:function(i){arguments[0]=i=t.$handleEvent(i),t.dragMoving.apply(void 0,arguments)},mouseup:function(i){arguments[0]=i=t.$handleEvent(i),t.dragFinish.apply(void 0,arguments)},mouseleave:function(i){arguments[0]=i=t.$handleEvent(i),t.dragFinish.apply(void 0,arguments)},touchmove:function(i){arguments[0]=i=t.$handleEvent(i),t.dragMoving.apply(void 0,arguments)},touchend:function(i){arguments[0]=i=t.$handleEvent(i),t.dragFinish.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"wb-drag_dv_progress_bar",class:{goFirst2:t.isOk},style:[t.progressBarStyle]},[t._v(t._s(t.successMessage))]),e("v-uni-view",{staticClass:"wb-drag_dv_text",class:[t.isPassing?"slidetounlock2":"slidetounlock"],style:[t.textStyle]},[t._v(t._s(t.message))]),e("v-uni-view",{staticClass:"wb-drag_dv_handler wb-drag_dv_handler_bg",class:{goFirst:t.isOk},style:[t.handlerStyle],attrs:{id:"handler"},on:{mousedown:function(i){arguments[0]=i=t.$handleEvent(i),t.dragStart.apply(void 0,arguments)},touchstart:function(i){arguments[0]=i=t.$handleEvent(i),t.dragStart.apply(void 0,arguments)}}},[e("u-icon",{attrs:{name:t.isPassing?t.successIcon:t.handlerIcon,color:t.isPassing?t.completedBg:"",size:t.isPassing?32:28}})],1)],1)],1)},n=[]},"81dd":function(t,i,e){"use strict";e.r(i);var a=e("b88b"),s=e.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){e.d(i,t,(function(){return a[t]}))}(n);i["default"]=s.a},"9cb5":function(t,i,e){"use strict";e.d(i,"b",(function(){return s})),e.d(i,"c",(function(){return n})),e.d(i,"a",(function(){return a}));var a={wbPage:e("3d57").default,wbDragVerifyChip:e("a84e").default,wbButton:e("13e6").default},s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("wb-page",{attrs:{"custom-style":t.customStyle}},[e("wb-drag-verify-chip",{ref:"chip",attrs:{"img-src":t.imgSrc,"is-passing":t.isPassing,"show-refresh":!0},on:{"update:isPassing":function(i){arguments[0]=i=t.$handleEvent(i),t.isPassing=i},"update:is-passing":function(i){arguments[0]=i=t.$handleEvent(i),t.isPassing=i},refresh:function(i){arguments[0]=i=t.$handleEvent(i),t.refresh.apply(void 0,arguments)},verify:function(i){arguments[0]=i=t.$handleEvent(i),t.pass.apply(void 0,arguments)}}}),e("wb-button",{attrs:{type:"primary",margin:"10px 0"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.reset.apply(void 0,arguments)}}},[t._v("还原")])],1)},n=[]},a84e:function(t,i,e){"use strict";e.r(i);var a=e("8122"),s=e("81dd");for(var n in s)["default"].indexOf(n)<0&&function(t){e.d(i,t,(function(){return s[t]}))}(n);var r=e("2618");for(var n in r)["default"].indexOf(n)<0&&function(t){e.d(i,t,(function(){return r[t]}))}(n);e("172d");var o=e("f0c5");s["default"].__module="dragverifychip";var c=Object(o["a"])(r["default"],a["b"],a["c"],!1,null,"3b69f658",null,!1,a["a"],s["default"]);i["default"]=c.exports},b88b:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("ac1f"),e("1276");var a={methods:{create:function(t){if(t){var i=t.split(","),e=1*i[0],a=1*i[1],s=1*i[2],n=1*i[3],r=document.querySelector("#movecanvas canvas").getContext("2d"),o=r.getImageData(e*n,0,s*n,a*n),c=document.querySelector("#movecanvas2 canvas").getContext("2d");c.putImageData(o,0,0)}}}};i.default=a},bc29:function(t,i,e){"use strict";e.r(i);var a=e("9cb5"),s=e("5567");for(var n in s)["default"].indexOf(n)<0&&function(t){e.d(i,t,(function(){return s[t]}))}(n);var r,o=e("f0c5"),c=Object(o["a"])(s["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],r);i["default"]=c.exports},e7a8:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a={name:"test",data:function(){return{customStyle:{padding:"20rpx"},imgs:["/static/com/chip/001.jpg","/static/com/chip/002.jpg","/static/com/chip/003.jpg","/static/com/chip/004.jpg","/static/com/chip/005.jpg","/static/com/chip/006.jpg"],isPassing:!1,imgSrc:""}},onLoad:function(){this.refresh()},methods:{refresh:function(){this.imgSrc=this.imgs[Math.round(Math.random()*this.imgs.length)]},pass:function(t){t&&this.layer.msg("验证通过",{icon:[0,"font-size:48px;"]})},reset:function(){this.isPassing=!1,this.$refs.chip.reset()}}};i.default=a},fab5:function(t,i,e){var a=e("24fb");i=a(!1),i.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/* COOL-UNI 颜色变量 */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 默认主题色 */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.wb-drag_verify[data-v-3b69f658]{position:relative;background-color:#e8e8e8;text-align:center;overflow:hidden}.wb-drag_verify .wb-drag_dv_handler[data-v-3b69f658]{position:absolute;top:0;left:0;cursor:move}.wb-drag_verify .wb-drag_dv_handler i[data-v-3b69f658]{color:#666;padding-left:0;font-size:16px}.wb-drag_verify .wb-drag_dv_progress_bar[data-v-3b69f658]{position:absolute;height:34px;width:0}.wb-drag_verify .wb-drag_dv_text[data-v-3b69f658]{position:absolute;top:0;-webkit-user-select:none;user-select:none;-webkit-text-size-adjust:none}.slidetounlock[data-v-3b69f658]{-webkit-animation:slidetounlock-data-v-3b69f658 3s infinite;animation:slidetounlock-data-v-3b69f658 3s infinite}.slidetounlock2[data-v-3b69f658]{-webkit-animation:slidetounlock2-data-v-3b69f658 3s infinite;animation:slidetounlock2-data-v-3b69f658 3s infinite}.wb-drag_verify .wb-drag_dv_text *[data-v-3b69f658]{-webkit-text-fill-color:#333!important}.goFirst[data-v-3b69f658]{left:0!important;transition:left .5s}.goKeep[data-v-3b69f658]{transition:left .2s}.goFirst2[data-v-3b69f658]{width:0!important;transition:width .5s}.wb-drag-verify-container[data-v-3b69f658]{position:relative;line-height:0}.refresh[data-v-3b69f658]{position:absolute;right:5px;top:5px;cursor:pointer;font-size:20px;z-index:200}.tips[data-v-3b69f658]{position:absolute;bottom:0;height:20px;line-height:20px;text-align:center;width:100%;font-size:12px;z-index:200}.tips.success[data-v-3b69f658]{background:hsla(0,0%,100%,.6);color:green}.tips.danger[data-v-3b69f658]{background:rgba(0,0,0,.6);color:#ff0}.main-canvas[data-v-3b69f658]{width:100%;height:100%;position:absolute;top:0;left:0}.move-canvas[data-v-3b69f658]{position:absolute;top:0;left:0;z-index:100}@-webkit-keyframes slidetounlock-data-v-3b69f658{0%{background-position:%?-300?% 0}100%{background-position:%?300?% 0}}@keyframes slidetounlock-data-v-3b69f658{0%{background-position:%?-300?% 0}100%{background-position:%?300?% 0}}@-webkit-keyframes slidetounlock2-data-v-3b69f658{0%{background-position:%?-300?% 0}100%{background-position:%?-300?% 0}}@keyframes slidetounlock2-data-v-3b69f658{0%{background-position:%?-300?% 0}100%{background-position:%?-300?% 0}}',""]),t.exports=i}}]);
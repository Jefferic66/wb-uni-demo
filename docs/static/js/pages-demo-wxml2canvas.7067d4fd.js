(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-demo-wxml2canvas"],{"0ef5":function(t,e,r){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports["default"]=t.exports,t.exports.__esModule=!0,n(e)}r("131a"),r("3410"),t.exports=n,t.exports["default"]=t.exports,t.exports.__esModule=!0},1003:function(t,e){function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}t.exports=n,t.exports["default"]=t.exports,t.exports.__esModule=!0},1503:function(t,e,r){var n=r("24fb");e=n(!1),e.push([t.i,"uni-page-body[data-v-1935cf7b]{background:rgba(0,0,0,.3)}.container[data-v-1935cf7b]{width:350px;margin:0 auto;height:420px;background:#fff;border-radius:20px;padding:20px}.img[data-v-1935cf7b]{width:310px;height:60px}.wrap[data-v-1935cf7b]{display:flex;justify-content:space-between;margin-top:10px}.wraptext[data-v-1935cf7b]{display:inline-block;font-size:13px;padding-right:10px}.wrapimg[data-v-1935cf7b]{width:60px;height:60px}body.?%PAGE?%[data-v-1935cf7b]{background:rgba(0,0,0,.3)}",""]),t.exports=e},"1c02":function(t,e,r){"use strict";var n=r("ee27").default;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Draw",{enumerable:!0,get:function(){return l.Draw}}),Object.defineProperty(e,"Widget",{enumerable:!0,get:function(){return a.Widget}}),e.selectNodesRefInfo=e.renderToCanvas=e.canvasToTempFilePath=void 0,Object.defineProperty(e,"xmlParse",{enumerable:!0,get:function(){return i.default}}),r("96cf"),r("d3b7");var o=n(r("c964")),i=n(r("e62c")),a=r("7c8b"),l=r("734b"),u=function(t,e){var r=document.querySelector("".concat(t," canvas")),n=r.getContext("2d");return{canvas:r,ctx:n,width:r.width,height:r.height}};e.selectNodesRefInfo=u;var s=function(){var t=(0,o.default)(regeneratorRuntime.mark((function t(e){var r,n,o,u,s,c,d,f,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.ctx,n=e.canvas,o=e.xWxml,u=e.xStyle,r&&n){t.next=3;break}return t.abrupt("return",Promise.reject(new Error("renderToCanvas: fail canvas has not been created")));case 3:return s=(0,i.default)(o),c=s.root,d=new a.Widget(c,u),f=d.init(),h=new l.Draw(n,r),t.next=9,h.drawNode(f);case 9:return t.abrupt("return",Promise.resolve(f));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();e.renderToCanvas=s;var c=function(t){var e=t.top,r=t.left,n=t.width,o=t.height,i=t.canvas,a=t.canvasId,l=t.quality,u=void 0===l?1:l,s=t.fileType,c=void 0===s?"png":s;return i?new Promise((function(t,l){var s=uni.getSystemInfoSync().pixelRatio;uni.canvasToTempFilePath({x:r,y:e,width:n,height:o,destWidth:n*s,destHeight:o*s,canvasId:a,canvas:i,fileType:c||"png",quality:u||1,success:function(e){t(e.tempFilePath)},fail:l})})):Promise.reject(new Error("canvasToTempFilePath: fail canvas has not been passed"))};e.canvasToTempFilePath=c},"31d6":function(t,e,r){"use strict";r.r(e);var n=r("b2b0"),o=r("5775");for(var i in o)["default"].indexOf(i)<0&&function(t){r.d(e,t,(function(){return o[t]}))}(i);r("7ed0");var a,l=r("f0c5"),u=Object(l["a"])(o["default"],n["b"],n["c"],!1,null,"4f3c5611",null,!1,n["a"],a);e["default"]=u.exports},"343c":function(t,e,r){r("4ae1"),r("d3b7"),r("f8c9");var n=r("0ef5"),o=r("8d1f"),i=r("5212");function a(t){var e=o();return function(){var r,o=n(t);if(e){var a=n(this).constructor;r=Reflect.construct(o,arguments,a)}else r=o.apply(this,arguments);return i(this,r)}}t.exports=a,t.exports["default"]=t.exports,t.exports.__esModule=!0},"3c5a":function(t,e,r){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports["default"]=t.exports,t.exports.__esModule=!0,n(e,r)}r("131a"),t.exports=n,t.exports["default"]=t.exports,t.exports.__esModule=!0},4616:function(t,e,r){"use strict";var n=r("6e59"),o=r.n(n);o.a},"4dfe":function(t,e,r){r("ac1f"),r("00b4"),r("d81d"),r("1276"),r("498a"),r("acd8"),r("e25e"),r("d3b7"),r("25f0"),r("fb6a");var n=function(t){var e=null;return!/^#/.test(t)||7!==t.length&&9!==t.length?null!==(e=/^(rgb|rgba)\((.+)\)/.exec(t))?"#"+e[2].split(",").map((function(t,e){return t=t.trim(),t=3===e?Math.floor(255*parseFloat(t)):parseInt(t,10),t=t.toString(16),1===t.length&&(t="0"+t),t})).join(""):"#00000000":t},o=function(t){return t.split("-").map((function(t,e){return 0===e?t:t[0].toUpperCase()+t.slice(1)})).join("")};t.exports={hex:n,splitLineToCamelCase:o}},5212:function(t,e,r){var n=r("7037")["default"],o=r("d43c");function i(t,e){if(e&&("object"===n(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return o(t)}t.exports=i,t.exports["default"]=t.exports,t.exports.__esModule=!0},"53ff":function(t,e,r){var n=r("dea7");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=r("4f06").default;o("7eb654cb",n,!0,{sourceMap:!1,shadowMode:!1})},5578:function(t,e,r){"use strict";r.d(e,"b",(function(){return o})),r.d(e,"c",(function(){return i})),r.d(e,"a",(function(){return n}));var n={wbPage:r("3d57").default,wbButton:r("13e6").default,wbWxmlToCanvas:r("31d6").default},o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("wb-page",{attrs:{full:!0,"custom-style":t.customStyle}},[r("v-uni-view",{staticClass:"container"},[r("v-uni-view",[r("v-uni-image",{staticClass:"img",attrs:{src:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-xyzgy/7d75b690-6087-11eb-918d-3d24828c498c.jpeg",mode:"widthFix"}})],1),r("v-uni-view",{staticClass:"wrap"},[r("v-uni-view",[r("v-uni-text",{staticClass:"wraptext"},[t._v("窗前明月光，疑是地上霜。举头望明月，低头思故乡")])],1),r("v-uni-view",[r("v-uni-image",{staticClass:"wrapimg",attrs:{src:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-xyzgy/7d75b690-6087-11eb-918d-3d24828c498c.jpeg",mode:"widthFix"}})],1)],1)],1),r("v-uni-view",{staticClass:"u-flex"},[r("v-uni-view",{staticClass:"u-flex-1 u-p-30"},[r("wb-button",{attrs:{block:!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.renderToCanvas.apply(void 0,arguments)}}},[t._v("渲染到canvas")])],1),r("v-uni-view",{staticClass:"u-flex-1 u-p-30"},[r("wb-button",{attrs:{block:!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.canvasToTempFilePath.apply(void 0,arguments)}}},[t._v("导出图片")])],1)],1),r("wb-wxml-to-canvas",{ref:"xWxmlToCanvas",attrs:{width:350,height:500,xStyle:t.style,xWxml:t.wxml}})],1)},i=[]},5775:function(t,e,r){"use strict";r.r(e);var n=r("fd7c"),o=r.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){r.d(e,t,(function(){return n[t]}))}(i);e["default"]=o.a},"6abd":function(t,e,r){r("fb6a"),r("d3b7"),r("a630"),r("3ca3"),r("ac1f"),r("00b4");var n=r("e6f9");function o(t,e){if(t){if("string"===typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}t.exports=o,t.exports["default"]=t.exports,t.exports.__esModule=!0},"6e59":function(t,e,r){var n=r("1503");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=r("4f06").default;o("086e0ff4",n,!0,{sourceMap:!1,shadowMode:!1})},"734b":function(t,e,r){var n=r("7a12").default,o=r("9705").default,i=r("df34").default,a=r("1003").default;r("96cf"),r("cb29"),r("d3b7"),r("acd8"),r("ac1f"),r("5319"),r("1276"),r("07ac");var l=function(){"use strict";function t(e,r){i(this,t),this.canvas=e,this.ctx=r}return a(t,[{key:"roundRect",value:function(t,e,r,n,o){var i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=arguments.length>6&&void 0!==arguments[6]&&arguments[6];if(!(o<0)){var l=this.ctx;l.beginPath(),l.arc(t+o,e+o,o,Math.PI,3*Math.PI/2),l.arc(t+r-o,e+o,o,3*Math.PI/2,0),l.arc(t+r-o,e+n-o,o,0,Math.PI/2),l.arc(t+o,e+n-o,o,Math.PI/2,Math.PI),l.lineTo(t,e+o),a&&l.stroke(),i&&l.fill()}}},{key:"drawView",value:function(t,e){var r=this.ctx,n=t.left,o=t.top,i=t.width,a=t.height,l=e.borderRadius,u=void 0===l?0:l,s=e.borderWidth,c=void 0===s?0:s,d=e.borderColor,f=e.color,h=void 0===f?"#000":f,p=e.backgroundColor,y=void 0===p?"transparent":p;r.save(),c>0&&(r.fillStyle=d||h,this.roundRect(n,o,i,a,u)),r.fillStyle=y;var v=i-2*c,g=a-2*c,b=u-c>=0?u-c:0;this.roundRect(n+c,o+c,v,g,b),r.restore()}},{key:"drawImage",value:function(){var t=o(regeneratorRuntime.mark((function t(e,r,n){var o=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t,i){var a=o.ctx,l=(o.canvas,n.borderRadius),u=void 0===l?0:l,s=r.left,c=r.top,d=r.width,f=r.height,h=null;a.save(),o.roundRect(s,c,d,f,u,!1,!1),a.clip(),h=new Image,h.onload=function(e){a.drawImage(h,s,c,d,f),a.restore(),t()},h.onerror=function(t){i()},h.src=e}));case 2:case"end":return t.stop()}}),t)})));function e(e,r,n){return t.apply(this,arguments)}return e}()},{key:"drawText",value:function(t,e,r){var o=this.ctx,i=e.left,a=e.top,l=e.width,u=e.height,s=r.color,c=void 0===s?"#000":s,d=r.lineHeight,f=void 0===d?"1.4em":d,h=r.fontSize,p=void 0===h?14:h,y=r.textAlign,v=void 0===y?"left":y,g=r.verticalAlign,b=void 0===g?"top":g,m=r.backgroundColor,x=void 0===m?"transparent":m;if(t&&!(f>u)){switch(o.save(),f&&(f=Math.ceil(parseFloat(f.replace("em"))*p)),o.textBaseline="top",o.font="".concat(p,"px sans-serif"),o.textAlign=v,o.fillStyle=x,this.roundRect(i,a,l,u,0),o.fillStyle=c,v){case"left":break;case"center":i+=.5*l;break;case"right":i+=l;break;default:break}var w=o.measureText(t).width,S=Math.ceil(w/l)*f,k=Math.ceil((u-S)/2);switch(k<0&&(k=0),b){case"top":break;case"middle":a+=k;break;case"bottom":a+=2*k;break;default:break}var T=Math.ceil((f-p)/2);if(w<=l)o.fillText(t,i,a+T);else{var _,C=t.split(""),j=a,P="",W=n(C);try{for(W.s();!(_=W.n()).done;){var O=_.value,E=P+O,M=o.measureText(E).width;if(M>l){if(o.fillText(P,i,a+T),a+=f,P=O,a+f>j+u)break}else P=E}}catch(R){W.e(R)}finally{W.f()}a+f<=j+u&&o.fillText(P,i,a+T),o.restore()}}}},{key:"drawNode",value:function(){var t=o(regeneratorRuntime.mark((function t(e){var r,n,o,i,a,l,u,s,c,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.layoutBox,n=e.computedStyle,o=e.name,i=e.attributes,a=i.src,l=i.text,"view"!==o){t.next=6;break}this.drawView(r,n),t.next=12;break;case 6:if("image"!==o){t.next=11;break}return t.next=9,this.drawImage(a,r,n);case 9:t.next=12;break;case 11:"text"===o&&this.drawText(l,r,n);case 12:u=Object.values(e.children),s=0,c=u;case 14:if(!(s<c.length)){t.next=21;break}return d=c[s],t.next=18,this.drawNode(d);case 18:s++,t.next=14;break;case 21:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),t}();t.exports={Draw:l}},"7a12":function(t,e,r){r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0");var n=r("6abd");function o(t,e){var r="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=n(t))||e&&t&&"number"===typeof t.length){r&&(t=r);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return l=t.done,t},e:function(t){u=!0,a=t},f:function(){try{l||null==r["return"]||r["return"]()}finally{if(u)throw a}}}}t.exports=o,t.exports["default"]=t.exports,t.exports.__esModule=!0},"7c8b":function(t,e,r){var n=r("1003").default,o=r("df34").default,i=r("8b83").default,a=r("343c").default;r("d3b7"),r("159b"),r("07ac"),r("ac1f"),r("1276"),r("d81d"),r("498a"),r("b64b");var l=r("e701"),u=r("4dfe"),s=u.splitLineToCamelCase,c=function(t){"use strict";i(r,t);var e=a(r);function r(t){var n;return o(this,r),n=e.call(this,t.style),n.name=t.name,n.attributes=t.attributes,n}return r}(l),d=function(){"use strict";function t(e,r){o(this,t),this.xom=e,this.style=r,this.inheritProps=["fontSize","lineHeight","textAlign","verticalAlign","color"]}return n(t,[{key:"init",value:function(){return this.container=this.create(this.xom),this.container.layout(),this.inheritStyle(this.container),this.container}},{key:"inheritStyle",value:function(t){var e=this,r=t.parent||null,n=t.children||{},o=t.computedStyle;r&&this.inheritProps.forEach((function(t){o[t]=o[t]||r.computedStyle[t]})),Object.values(n).forEach((function(t){e.inheritStyle(t)}))}},{key:"create",value:function(t){var e=this,r=(t.attributes.class||"").split(" ");r=r.map((function(t){return s(t.trim())}));var n={};r.forEach((function(t){Object.assign(n,e.style[t]||{})}));for(var o={name:t.name,style:n},i=Object.keys(t.attributes),a={},l=0,u=i;l<u.length;l++){var d=u[l],f=t.attributes[d],h=s(d);a[h]=""===f||"true"===f||"false"!==f&&f}a.text=t.content,o.attributes=a;var p=new c(o);return t.children.forEach((function(t){var r=e.create(t);p.add(r)})),p}}]),t}();t.exports={Widget:d}},"7ed0":function(t,e,r){"use strict";var n=r("53ff"),o=r.n(n);o.a},8437:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n='\n\t\t<view class="container">\n\t\t\t<view><image class="img" src="https://vkceyugu.cdn.bspapp.com/VKCEYUGU-xyzgy/7d75b690-6087-11eb-918d-3d24828c498c.jpeg" mode="widthFix"></image></view>\n\t\t\t<view class="wrap">\n\t\t\t\t<view>\n\t\t\t\t\t<text class="wraptext">窗前明月光，疑是地上霜。举头望明月，低头思故乡</text>\n\t\t\t\t</view>\n\t\t\t<view><image class="wrapimg" src="https://vkceyugu.cdn.bspapp.com/VKCEYUGU-xyzgy/7d75b690-6087-11eb-918d-3d24828c498c.jpeg" mode="widthFix"></image></view>\n\t\t\t</view>\n\t\t</view>\n',o={container:{width:350,height:420,backgroundColor:"#fff",borderRadius:20,padding:20},img:{width:310,height:310},wrap:{flexDirection:"row",justifyContent:"space-between",marginTop:10},wraptext:{width:210,height:60,fontSize:13,paddingRight:10},wrapimg:{width:60,height:60}},i={name:"test",data:function(){return{wxml:n,style:o,customStyle:{padding:"20rpx 0"}}},methods:{renderToCanvas:function(){this.$refs.xWxmlToCanvas.renderToCanvas()},canvasToTempFilePath:function(){this.$refs.xWxmlToCanvas.canvasToTempFilePath().then((function(t){uni.previewImage({urls:[t]})}))}}};e.default=i},"8b83":function(t,e,r){var n=r("3c5a");function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}t.exports=o,t.exports["default"]=t.exports,t.exports.__esModule=!0},"8d1f":function(t,e,r){function n(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}r("d3b7"),r("f8c9"),r("4ae1"),t.exports=n,t.exports["default"]=t.exports,t.exports.__esModule=!0},9376:function(t,e,r){"use strict";r.r(e);var n=r("5578"),o=r("bc31");for(var i in o)["default"].indexOf(i)<0&&function(t){r.d(e,t,(function(){return o[t]}))}(i);r("4616");var a,l=r("f0c5"),u=Object(l["a"])(o["default"],n["b"],n["c"],!1,null,"1935cf7b",null,!1,n["a"],a);e["default"]=u.exports},9705:function(t,e,r){function n(t,e,r,n,o,i,a){try{var l=t[i](a),u=l.value}catch(s){return void r(s)}l.done?e(u):Promise.resolve(u).then(n,o)}function o(t){return function(){var e=this,r=arguments;return new Promise((function(o,i){var a=t.apply(e,r);function l(t){n(a,o,i,l,u,"next",t)}function u(t){n(a,o,i,l,u,"throw",t)}l(void 0)}))}}r("d3b7"),t.exports=o,t.exports["default"]=t.exports,t.exports.__esModule=!0},b2b0:function(t,e,r){"use strict";var n;r.d(e,"b",(function(){return o})),r.d(e,"c",(function(){return i})),r.d(e,"a",(function(){return n}));var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-uni-view",{class:{hide:t.hide}},[r("v-uni-canvas",{style:{width:t.width+"px",height:t.height+"px"},attrs:{id:"canvas","canvas-id":"canvas",type:"2d"},on:{error:function(e){arguments[0]=e=t.$handleEvent(e),t.canvasIdErrorCallback.apply(void 0,arguments)}}})],1)},i=[]},bc31:function(t,e,r){"use strict";r.r(e);var n=r("8437"),o=r.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){r.d(e,t,(function(){return n[t]}))}(i);e["default"]=o.a},d43c:function(t,e){function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}t.exports=r,t.exports["default"]=t.exports,t.exports.__esModule=!0},dea7:function(t,e,r){var n=r("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/* COOL-UNI 颜色变量 */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 默认主题色 */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.hide[data-v-4f3c5611]{position:fixed;left:%?-800?%}',""]),t.exports=e},df34:function(t,e){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t.exports=r,t.exports["default"]=t.exports,t.exports.__esModule=!0},e62c:function(t,e,r){function n(t){return t=t.trim(),t=t.replace(/<!--[\s\S]*?-->/g,""),e();function e(){return{declaration:r(),root:n()}}function r(){var t=l(/^<\?xml\s*/);if(t){var e={attributes:{}};while(!u()&&!s("?>")){var r=i();if(!r)return e;e.attributes[r.name]=r.value}return l(/\?>\s*/),e}}function n(){var t=l(/^<([\w-:.]+)\s*/);if(t){var e,r={name:t[1],attributes:{},children:[]};while(!(u()||s(">")||s("?>")||s("/>"))){var a=i();if(!a)return r;r.attributes[a.name]=a.value}if(l(/^\s*\/>\s*/))return r;l(/\??>\s*/),r.content=o();while(e=n())r.children.push(e);return l(/^<\/[\w-:.]+>\s*/),r}}function o(){var t=l(/^([^<]*)/);return t?t[1]:""}function i(){var t=l(/([\w:-]+)\s*=\s*("[^"]*"|'[^']*'|\w+)\s*/);if(t)return{name:t[1],value:a(t[2])}}function a(t){return t.replace(/^['"]|['"]$/g,"")}function l(e){var r=t.match(e);if(r)return t=t.slice(r[0].length),r}function u(){return 0==t.length}function s(e){return 0==t.indexOf(e)}}r("498a"),r("ac1f"),r("5319"),r("466d"),r("fb6a"),r("c975"),t.exports=n},e6f9:function(t,e){function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}t.exports=r,t.exports["default"]=t.exports,t.exports.__esModule=!0},e701:function(t,e,r){(function(t){var n,o,i,a=r("62f5").default;r("a4d3"),r("e01a"),r("d3b7"),r("944a"),r("0c47"),r("23dc"),r("159b"),r("b64b"),r("caad"),r("2532"),r("d81d"),function(r,l){"object"==a(e)&&"object"==a(t)?t.exports=l():(o=[],n=l,i="function"===typeof n?n.apply(e,o):n,void 0===i||(t.exports=i))}(0,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==a(t)&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(r(1)),i=r(2),a=0,l=function(){function t(e){var r=this;void 0===e&&(e={}),this.parent=null,this.id=t.uuid(),this.style={},this.computedStyle={},this.lastComputedStyle={},this.children={},this.layoutBox={left:0,top:0,width:0,height:0},e=Object.assign(i.getDefaultStyle(),e),this.computedStyle=Object.assign(i.getDefaultStyle(),e),this.lastComputedStyle=Object.assign(i.getDefaultStyle(),e),Object.keys(e).forEach((function(t){Object.defineProperty(r.style,t,{configurable:!0,enumerable:!0,get:function(){return e[t]},set:function(n){n!==e[t]&&void 0!==n&&(r.lastComputedStyle=r.computedStyle[t],e[t]=n,r.computedStyle[t]=n,i.scalableStyles.includes(t)&&r.style.scale&&(r.computedStyle[t]=n*r.style.scale),"scale"===t&&i.scalableStyles.forEach((function(t){e[t]&&(r.computedStyle[t]=e[t]*n)})),"hidden"===t&&(n?i.layoutAffectedStyles.forEach((function(t){r.computedStyle[t]=0})):i.layoutAffectedStyles.forEach((function(t){r.computedStyle[t]=r.lastComputedStyle[t]}))))}})})),this.style.scale&&i.scalableStyles.forEach((function(t){if(r.style[t]){var e=r.style[t]*r.style.scale;r.computedStyle[t]=e}})),e.hidden&&i.layoutAffectedStyles.forEach((function(t){r.computedStyle[t]=0}))}return t.uuid=function(){return a++},t.prototype.getAbsolutePosition=function(t){if(!t)return this.getAbsolutePosition(this);if(!t.parent)return{left:0,top:0};var e=this.getAbsolutePosition(t.parent),r=e.left,n=e.top;return{left:r+t.layoutBox.left,top:n+t.layoutBox.top}},t.prototype.add=function(t){t.parent=this,this.children[t.id]=t},t.prototype.remove=function(t){var e=this;t?this.children[t.id]&&(t.remove(),delete this.children[t.id]):Object.keys(this.children).forEach((function(t){e.children[t].remove(),delete e.children[t]}))},t.prototype.getNodeTree=function(){var t=this;return{id:this.id,style:this.computedStyle,children:Object.keys(this.children).map((function(e){return t.children[e].getNodeTree()}))}},t.prototype.applyLayout=function(t){var e=this;["left","top","width","height"].forEach((function(r){t.layout&&"number"==typeof t.layout[r]&&(e.layoutBox[r]=t.layout[r],!e.parent||"left"!==r&&"top"!==r||(e.layoutBox[r]+=e.parent.layoutBox[r]))})),t.children.forEach((function(t){e.children[t.id].applyLayout(t)}))},t.prototype.layout=function(){var t=this.getNodeTree();o.default(t),this.applyLayout(t)},t}();e.default=l},function(t,e,r){"use strict";r.r(e);var n=function(){var t,e="inherit",r="ltr",n="rtl",o="row",i="row-reverse",a="column",l="column-reverse",u="flex-start",s="center",c="flex-end",d="space-between",f="space-around",h="flex-start",p="center",y="flex-end",v="stretch",g="relative",b="absolute",m={row:"left","row-reverse":"right",column:"top","column-reverse":"bottom"},x={row:"right","row-reverse":"left",column:"bottom","column-reverse":"top"},w={row:"left","row-reverse":"right",column:"top","column-reverse":"bottom"},S={row:"width","row-reverse":"width",column:"height","column-reverse":"height"};function k(t){return void 0===t}function T(t){return t===o||t===i}function _(t,e){if(void 0!==t.style.marginStart&&T(e))return t.style.marginStart;var r=null;switch(e){case"row":r=t.style.marginLeft;break;case"row-reverse":r=t.style.marginRight;break;case"column":r=t.style.marginTop;break;case"column-reverse":r=t.style.marginBottom}return void 0!==r?r:void 0!==t.style.margin?t.style.margin:0}function C(t,e){if(void 0!==t.style.marginEnd&&T(e))return t.style.marginEnd;var r=null;switch(e){case"row":r=t.style.marginRight;break;case"row-reverse":r=t.style.marginLeft;break;case"column":r=t.style.marginBottom;break;case"column-reverse":r=t.style.marginTop}return null!=r?r:void 0!==t.style.margin?t.style.margin:0}function j(t,e){if(void 0!==t.style.borderStartWidth&&t.style.borderStartWidth>=0&&T(e))return t.style.borderStartWidth;var r=null;switch(e){case"row":r=t.style.borderLeftWidth;break;case"row-reverse":r=t.style.borderRightWidth;break;case"column":r=t.style.borderTopWidth;break;case"column-reverse":r=t.style.borderBottomWidth}return null!=r&&r>=0?r:void 0!==t.style.borderWidth&&t.style.borderWidth>=0?t.style.borderWidth:0}function P(t,e){if(void 0!==t.style.borderEndWidth&&t.style.borderEndWidth>=0&&T(e))return t.style.borderEndWidth;var r=null;switch(e){case"row":r=t.style.borderRightWidth;break;case"row-reverse":r=t.style.borderLeftWidth;break;case"column":r=t.style.borderBottomWidth;break;case"column-reverse":r=t.style.borderTopWidth}return null!=r&&r>=0?r:void 0!==t.style.borderWidth&&t.style.borderWidth>=0?t.style.borderWidth:0}function W(t,e){return function(t,e){if(void 0!==t.style.paddingStart&&t.style.paddingStart>=0&&T(e))return t.style.paddingStart;var r=null;switch(e){case"row":r=t.style.paddingLeft;break;case"row-reverse":r=t.style.paddingRight;break;case"column":r=t.style.paddingTop;break;case"column-reverse":r=t.style.paddingBottom}return null!=r&&r>=0?r:void 0!==t.style.padding&&t.style.padding>=0?t.style.padding:0}(t,e)+j(t,e)}function O(t,e){return function(t,e){if(void 0!==t.style.paddingEnd&&t.style.paddingEnd>=0&&T(e))return t.style.paddingEnd;var r=null;switch(e){case"row":r=t.style.paddingRight;break;case"row-reverse":r=t.style.paddingLeft;break;case"column":r=t.style.paddingBottom;break;case"column-reverse":r=t.style.paddingTop}return null!=r&&r>=0?r:void 0!==t.style.padding&&t.style.padding>=0?t.style.padding:0}(t,e)+P(t,e)}function E(t,e){return j(t,e)+P(t,e)}function M(t,e){return _(t,e)+C(t,e)}function R(t,e){return W(t,e)+O(t,e)}function L(t,e){return e.style.alignSelf?e.style.alignSelf:t.style.alignItems?t.style.alignItems:"stretch"}function I(t,e){if(e===n){if(t===o)return i;if(t===i)return o}return t}function B(t,e){return function(t){return t===a||t===l}(t)?I(o,e):a}function A(t){return t.style.position?t.style.position:"relative"}function F(t){return A(t)===g&&t.style.flex>0}function D(t,e){return t.layout[S[e]]+M(t,e)}function N(t,e){return void 0!==t.style[S[e]]&&t.style[S[e]]>=0}function U(t,e){return void 0!==t.style[e]}function H(t,e){return void 0!==t.style[e]?t.style[e]:0}function $(t,e,r){var n={row:t.style.minWidth,"row-reverse":t.style.minWidth,column:t.style.minHeight,"column-reverse":t.style.minHeight}[e],o={row:t.style.maxWidth,"row-reverse":t.style.maxWidth,column:t.style.maxHeight,"column-reverse":t.style.maxHeight}[e],i=r;return void 0!==o&&o>=0&&i>o&&(i=o),void 0!==n&&n>=0&&i<n&&(i=n),i}function z(t,e){return t>e?t:e}function q(t,e){void 0===t.layout[S[e]]&&N(t,e)&&(t.layout[S[e]]=z($(t,e,t.style[S[e]]),R(t,e)))}function V(t,e,r){e.layout[x[r]]=t.layout[S[r]]-e.layout[S[r]]-e.layout[w[r]]}function G(t,e){return void 0!==t.style[m[e]]?H(t,m[e]):-H(t,x[e])}function K(n,P,K){var J=function(t,n){var o;return(o=t.style.direction?t.style.direction:e)===e&&(o=void 0===n?r:n),o}(n,K),Q=I(function(t){return t.style.flexDirection?t.style.flexDirection:a}(n),J),X=B(Q,J),Z=I(o,J);q(n,Q),q(n,X),n.layout.direction=J,n.layout[m[Q]]+=_(n,Q)+G(n,Q),n.layout[x[Q]]+=C(n,Q)+G(n,Q),n.layout[m[X]]+=_(n,X)+G(n,X),n.layout[x[X]]+=C(n,X)+G(n,X);var tt=n.children.length,et=R(n,Z);if(function(t){return void 0!==t.style.measure}(n)){var rt=!k(n.layout[S[Z]]),nt=t;nt=N(n,Z)?n.style.width:rt?n.layout[S[Z]]:P-M(n,Z),nt-=et;var ot=!N(n,Z)&&!rt,it=!N(n,a)&&k(n.layout[S[a]]);if(ot||it){var at=n.style.measure(nt);ot&&(n.layout.width=at.width+et),it&&(n.layout.height=at.height+R(n,a))}if(0===tt)return}var lt,ut,st,ct,dt=function(t){return"wrap"===t.style.flexWrap}(n),ft=function(t){return t.style.justifyContent?t.style.justifyContent:"flex-start"}(n),ht=W(n,Q),pt=W(n,X),yt=R(n,Q),vt=R(n,X),gt=!k(n.layout[S[Q]]),bt=!k(n.layout[S[X]]),mt=T(Q),xt=null,wt=null,St=t;gt&&(St=n.layout[S[Q]]-yt);for(var kt=0,Tt=0,_t=0,Ct=0,jt=0,Pt=0;Tt<tt;){var Wt,Ot=0,Et=0,Mt=0,Rt=0,Lt=gt&&ft===u||!gt&&ft!==s,It=Lt?tt:kt,Bt=!0,At=tt,Ft=null,Dt=null,Nt=ht,Ut=0;for(lt=kt;lt<tt;++lt){if((st=n.children[lt]).lineIndex=Pt,st.nextAbsoluteChild=null,st.nextFlexChild=null,(Jt=L(n,st))===v&&A(st)===g&&bt&&!N(st,X))st.layout[S[X]]=z($(st,X,n.layout[S[X]]-vt-M(st,X)),R(st,X));else if(A(st)===b)for(null===xt&&(xt=st),null!==wt&&(wt.nextAbsoluteChild=st),wt=st,ut=0;ut<2;ut++)ct=0!==ut?o:a,!k(n.layout[S[ct]])&&!N(st,ct)&&U(st,m[ct])&&U(st,x[ct])&&(st.layout[S[ct]]=z($(st,ct,n.layout[S[ct]]-R(n,ct)-M(st,ct)-H(st,m[ct])-H(st,x[ct])),R(st,ct)));var Ht=0;if(gt&&F(st)?(Et++,Mt+=st.style.flex,null===Ft&&(Ft=st),null!==Dt&&(Dt.nextFlexChild=st),Dt=st,Ht=R(st,Q)+M(st,Q)):(Wt=t,mt||(Wt=N(n,Z)?n.layout[S[Z]]-et:P-M(n,Z)-et),0===_t&&Y(st,Wt,J),A(st)===g&&(Rt++,Ht=D(st,Q))),dt&&gt&&Ot+Ht>St&&lt!==kt){Rt--,_t=1;break}Lt&&(A(st)!==g||F(st))&&(Lt=!1,It=lt),Bt&&(A(st)!==g||Jt!==v&&Jt!==h||k(st.layout[S[X]]))&&(Bt=!1,At=lt),Lt&&(st.layout[w[Q]]+=Nt,gt&&V(n,st,Q),Nt+=D(st,Q),Ut=z(Ut,$(st,X,D(st,X)))),Bt&&(st.layout[w[X]]+=Ct+pt,bt&&V(n,st,X)),_t=0,Ot+=Ht,Tt=lt+1}var $t=0,zt=0,qt=0;if(qt=gt?St-Ot:z(Ot,0)-Ot,0!==Et){var Vt,Gt,Kt=qt/Mt;for(Dt=Ft;null!==Dt;)(Vt=Kt*Dt.style.flex+R(Dt,Q))!==(Gt=$(Dt,Q,Vt))&&(qt-=Gt,Mt-=Dt.style.flex),Dt=Dt.nextFlexChild;for((Kt=qt/Mt)<0&&(Kt=0),Dt=Ft;null!==Dt;)Dt.layout[S[Q]]=$(Dt,Q,Kt*Dt.style.flex+R(Dt,Q)),Wt=t,N(n,Z)?Wt=n.layout[S[Z]]-et:mt||(Wt=P-M(n,Z)-et),Y(Dt,Wt,J),st=Dt,Dt=Dt.nextFlexChild,st.nextFlexChild=null}else ft!==u&&(ft===s?$t=qt/2:ft===c?$t=qt:ft===d?(qt=z(qt,0),zt=Et+Rt-1!=0?qt/(Et+Rt-1):0):ft===f&&($t=(zt=qt/(Et+Rt))/2));for(Nt+=$t,lt=It;lt<Tt;++lt)A(st=n.children[lt])===b&&U(st,m[Q])?st.layout[w[Q]]=H(st,m[Q])+j(n,Q)+_(st,Q):(st.layout[w[Q]]+=Nt,gt&&V(n,st,Q),A(st)===g&&(Nt+=zt+D(st,Q),Ut=z(Ut,$(st,X,D(st,X)))));var Yt=n.layout[S[X]];for(bt||(Yt=z($(n,X,Ut+vt),vt)),lt=At;lt<Tt;++lt)if(A(st=n.children[lt])===b&&U(st,m[X]))st.layout[w[X]]=H(st,m[X])+j(n,X)+_(st,X);else{var Jt,Qt=pt;if(A(st)===g)if((Jt=L(n,st))===v)k(st.layout[S[X]])&&(st.layout[S[X]]=z($(st,X,Yt-vt-M(st,X)),R(st,X)));else if(Jt!==h){var Xt=Yt-vt-D(st,X);Qt+=Jt===p?Xt/2:Xt}st.layout[w[X]]+=Ct+Qt,bt&&V(n,st,X)}Ct+=Ut,jt=z(jt,Nt),Pt+=1,kt=Tt}if(Pt>1&&bt){var Zt=n.layout[S[X]]-vt,te=Zt-Ct,ee=0,re=pt,ne=function(t){return t.style.alignContent?t.style.alignContent:"flex-start"}(n);ne===y?re+=te:ne===p?re+=te/2:ne===v&&Zt>Ct&&(ee=te/Pt);var oe=0;for(lt=0;lt<Pt;++lt){var ie=oe,ae=0;for(ut=ie;ut<tt;++ut)if(A(st=n.children[ut])===g){if(st.lineIndex!==lt)break;k(st.layout[S[X]])||(ae=z(ae,st.layout[S[X]]+M(st,X)))}for(oe=ut,ae+=ee,ut=ie;ut<oe;++ut)if(A(st=n.children[ut])===g){var le=L(n,st);if(le===h)st.layout[w[X]]=re+_(st,X);else if(le===y)st.layout[w[X]]=re+ae-C(st,X)-st.layout[S[X]];else if(le===p){var ue=st.layout[S[X]];st.layout[w[X]]=re+(ae-ue)/2}else le===v&&(st.layout[w[X]]=re+_(st,X))}re+=ae}}var se=!1,ce=!1;if(gt||(n.layout[S[Q]]=z($(n,Q,jt+O(n,Q)),yt),Q!==i&&Q!==l||(se=!0)),bt||(n.layout[S[X]]=z($(n,X,Ct+vt),vt),X!==i&&X!==l||(ce=!0)),se||ce)for(lt=0;lt<tt;++lt)st=n.children[lt],se&&V(n,st,Q),ce&&V(n,st,X);for(wt=xt;null!==wt;){for(ut=0;ut<2;ut++)ct=0!==ut?o:a,!k(n.layout[S[ct]])&&!N(wt,ct)&&U(wt,m[ct])&&U(wt,x[ct])&&(wt.layout[S[ct]]=z($(wt,ct,n.layout[S[ct]]-E(n,ct)-M(wt,ct)-H(wt,m[ct])-H(wt,x[ct])),R(wt,ct))),U(wt,x[ct])&&!U(wt,m[ct])&&(wt.layout[m[ct]]=n.layout[S[ct]]-wt.layout[S[ct]]-H(wt,x[ct]));st=wt,wt=wt.nextAbsoluteChild,st.nextAbsoluteChild=null}}function Y(t,e,n){t.shouldUpdate=!0;var o=t.style.direction||r;!t.isDirty&&t.lastLayout&&t.lastLayout.requestedHeight===t.layout.height&&t.lastLayout.requestedWidth===t.layout.width&&t.lastLayout.parentMaxWidth===e&&t.lastLayout.direction===o?(t.layout.width=t.lastLayout.width,t.layout.height=t.lastLayout.height,t.layout.top=t.lastLayout.top,t.layout.left=t.lastLayout.left):(t.lastLayout||(t.lastLayout={}),t.lastLayout.requestedWidth=t.layout.width,t.lastLayout.requestedHeight=t.layout.height,t.lastLayout.parentMaxWidth=e,t.lastLayout.direction=o,t.children.forEach((function(t){t.layout.width=void 0,t.layout.height=void 0,t.layout.top=0,t.layout.left=0})),K(t,e,n),t.lastLayout.width=t.layout.width,t.lastLayout.height=t.layout.height,t.lastLayout.top=t.layout.top,t.lastLayout.left=t.layout.left)}return{layoutNodeImpl:K,computeLayout:Y,fillNodes:function t(e){return e.layout&&!e.isDirty||(e.layout={width:void 0,height:void 0,top:0,left:0,right:0,bottom:0}),e.style||(e.style={}),e.children||(e.children=[]),e.children.forEach(t),e}}}();e.default=function(t){n.fillNodes(t),n.computeLayout(t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.textStyles=["color","fontSize","textAlign","fontWeight","lineHeight","lineBreak"],e.scalableStyles=["left","top","right","bottom","width","height","margin","marginLeft","marginRight","marginTop","marginBottom","padding","paddingLeft","paddingRight","paddingTop","paddingBottom","borderWidth","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],e.layoutAffectedStyles=["margin","marginTop","marginBottom","marginLeft","marginRight","padding","paddingTop","paddingBottom","paddingLeft","paddingRight","width","height"],e.getDefaultStyle=function(){return{left:void 0,top:void 0,right:void 0,bottom:void 0,width:void 0,height:void 0,maxWidth:void 0,maxHeight:void 0,minWidth:void 0,minHeight:void 0,margin:void 0,marginLeft:void 0,marginRight:void 0,marginTop:void 0,marginBottom:void 0,padding:void 0,paddingLeft:void 0,paddingRight:void 0,paddingTop:void 0,paddingBottom:void 0,borderWidth:void 0,flexDirection:void 0,justifyContent:void 0,alignItems:void 0,alignSelf:void 0,flex:void 0,flexWrap:void 0,position:void 0,hidden:!1,scale:1}}}]).default}))}).call(this,r("62e4")(t))},fd7c:function(t,e,r){"use strict";var n=r("ee27").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,r("96cf");var o=n(r("c964"));r("a9e3"),r("d3b7");var i=r("1c02"),a={props:{hide:{type:Boolean,default:!0},width:{type:Number,default:300},height:{type:Number,default:300},xWxml:{type:String,default:""},xStyle:{type:Object,default:function(){return{}}}},data:function(){return{canvasId:"canvas"}},methods:{canvasIdErrorCallback:function(t){console.log("canvasIdErrorCallback",t)},renderToCanvas:function(){var t=this,e=this.ctx,r=this.canvas,n=this.xWxml,o=this.xStyle;(0,i.renderToCanvas)({ctx:e,canvas:r,xWxml:n,xStyle:o}).then((function(e){t.boundary={top:e.layoutBox.top,left:e.layoutBox.left,width:e.computedStyle.width,height:e.computedStyle.height}}))},canvasToTempFilePath:function(){var t=this.canvas,e=this.canvasId,r=this.boundary;if(!r)return Promise.reject(new Error("canvasToTempFilePath: renderToCanvas 函数未执行"));var n=r.top,o=r.left,a=r.width,l=r.height;return new Promise((function(r,u){(0,i.canvasToTempFilePath)({top:n,left:o,width:a,height:l,canvasId:e,canvas:t}).then((function(t){r(t)}))}))}},mounted:function(){var t=this;this.$nextTick((0,o.default)(regeneratorRuntime.mark((function e(){var r,n,o,a,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.selectNodesRefInfo)("#".concat(t.canvasId),t);case 2:r=e.sent,n=r.canvas,o=r.ctx,a=r.width,l=r.height,u=uni.getSystemInfoSync().pixelRatio,n.width=a*u,n.height=l*u,o.scale(u,u),t.canvas=n,t.ctx=o;case 13:case"end":return e.stop()}}),e)}))))}};e.default=a}}]);